{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-lg p-4" style="background-color: #374151; color: white; border-radius: 12px;">
    <div class="card-header text-white text-center border-0" style="background: transparent;">
      <h3 class="fw-bold">{{ customer_record.first_name }} {{ customer_record.last_name }}</h3>
    </div>
    <div class="card-body">
      <div class="row align-items-center">
        <!-- Imagen del cliente -->
        <div class="col-md-4 text-center">
          <div class="rounded-circle overflow-hidden shadow" style="width: 150px; height: 150px; background-color: #2d3748;">
            {% if customer_record.image %}
              <img src="{{ customer_record.image.url }}" alt="Foto de {{ customer_record.first_name }}" class="w-100 h-100 object-fit-cover">
            {% else %}
              <i class="bi bi-person-circle text-secondary" style="font-size: 120px;"></i>
            {% endif %}
          </div>
        </div>
        
        <!-- Información del cliente -->
        <div class="col-md-8">
          <div class="row">
            <div class="col-md-6">
              <p><strong>Email:</strong> {{ customer_record.email }}</p>
              <p><strong>Fono:</strong> {{ customer_record.phone }}</p>
              <p><strong>Dirección:</strong> {{ customer_record.address }}</p>
            </div>
            <div class="col-md-6">
              <p><strong>Ciudad:</strong> {{ customer_record.city }}</p>
              <p><strong>Creado en:</strong> {{ customer_record.created_at }}</p>
              <p><strong>ID:</strong> {{ customer_record.id }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Notas -->
      <h4 class="mt-4">Notas</h4>
      <ul class="list-group">
        {% for note in notes %}
          <li class="list-group-item bg-dark text-white border-0 rounded mb-2">
            <strong>{{ note.author.username }}</strong> - {{ note.created_at }}<br>
            {{ note.content }}
          </li>
        {% empty %}
          <li class="list-group-item bg-secondary text-white border-0 rounded">No hay notas para este cliente.</li>
        {% endfor %}
      </ul>
    </div>
    
    <!-- Botones de acción -->
    <div class="card-footer d-flex justify-content-between border-0">
      <a href="{% url 'clientes' %}" class="btn btn-light">
        <i class="bi bi-arrow-left me-2"></i>Volver
      </a>
      <div>
        <a href="{% url 'update_record' customer_record.id %}" class="btn btn-primary">
          <i class="bi bi-pencil-square me-2"></i>Editar
        </a>
        <a href="{% url 'delete_record' customer_record.id %}" class="btn btn-danger">
          <i class="bi bi-trash3 me-2"></i>Eliminar
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
